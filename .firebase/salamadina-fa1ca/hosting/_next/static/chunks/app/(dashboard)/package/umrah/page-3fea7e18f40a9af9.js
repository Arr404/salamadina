(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5119],{87101:function(e,a,t){Promise.resolve().then(t.bind(t,35224)),Promise.resolve().then(t.bind(t,82591)),Promise.resolve().then(t.bind(t,1710)),Promise.resolve().then(t.bind(t,55876))},45814:function(e,a,t){"use strict";t.d(a,{Py:function(){return m},Uu:function(){return u},_w:function(){return h},a$:function(){return o},e$:function(){return g},fu:function(){return c},qA:function(){return d}});var r=t(69842),l=t(73501);let s=(0,r.ad)(l.Z),i=(0,r.hJ)(s,"promos"),n=(0,r.hJ)(s,"airports"),o=async()=>{try{let e=await (0,r.PL)(i),a=await (0,r.PL)(n),t=e.docs.map(e=>({id:e.id,name:e.data().name})),l=a.docs.map(e=>({id:e.id,code:e.data().code,name:e.data().name}));return{promos:t,airports:l}}catch(e){throw console.error("Error fetching filters:",e),e}},c=async e=>{try{return{id:(await (0,r.ET)(i,{name:e})).id,name:e}}catch(e){throw console.error("Error adding promo:",e),e}},d=async e=>{try{return await (0,r.oe)((0,r.JU)(s,"promos",e)),!0}catch(e){throw console.error("Error deleting promo:",e),e}},m=async(e,a)=>{try{return{id:(await (0,r.ET)(n,{code:e,name:a})).id,code:e,name:a}}catch(e){throw console.error("Error adding airport:",e),e}},u=async e=>{try{return await (0,r.oe)((0,r.JU)(s,"airports",e)),!0}catch(e){throw console.error("Error deleting airport:",e),e}},g=async(e,a)=>{try{let t=(0,r.JU)(s,"promos",e);return await (0,r.r7)(t,{name:a}),{id:e,name:a}}catch(e){throw console.error("Error updating promo:",e),e}},h=async(e,a,t)=>{try{let l=(0,r.JU)(s,"airports",e);return await (0,r.r7)(l,{code:a,name:t}),{id:e,code:a,name:t}}catch(e){throw console.error("Error updating airport:",e),e}}},73501:function(e,a,t){"use strict";let r=(0,t(15236).ZF)({apiKey:"AIzaSyCh-VbkFTAxPrY7lvEbaOd4i73lodoE4RQ",authDomain:"salamadina-fa1ca.firebaseapp.com",projectId:"salamadina-fa1ca",storageBucket:"salamadina-fa1ca.firebasestorage.app",messagingSenderId:"1025635284303",appId:"1:1025635284303:web:a19855074f12f54ffa413a"});a.Z=r},55876:function(e,a,t){"use strict";t.d(a,{default:function(){return C}});var r=t(57437),l=t(2265),s=t(69842),i=t(73501);let n=(0,s.ad)(i.Z),o={getPackages:async()=>{try{let e=(0,s.IO)((0,s.hJ)(n,"umrahPackages"),(0,s.Xo)("createdAt","desc")),a=await (0,s.PL)(e),t=[];return a.forEach(e=>{t.push({id:e.id,...e.data()})}),t}catch(e){throw console.error("Error fetching packages: ",e),Error("Failed to fetch packages")}},addPackage:async e=>{try{return(await (0,s.ET)((0,s.hJ)(n,"umrahPackages"),{...e,createdAt:s.EK.now()})).id}catch(e){throw console.error("Error adding package: ",e),Error("Failed to add package")}},updatePackage:async(e,a)=>{try{let t=(0,s.JU)(n,"umrahPackages",e);await (0,s.r7)(t,{...a,updatedAt:s.EK.now()})}catch(e){throw console.error("Error updating package: ",e),Error("Failed to update package")}},deletePackage:async e=>{try{await (0,s.oe)((0,s.JU)(n,"umrahPackages",e))}catch(e){throw console.error("Error deleting package: ",e),Error("Failed to delete package")}}};var c=t(38472);let d=e=>{try{let a=e.match(/@([^/]+)$/);if(a&&a[1])return a[1];throw Error("Invalid Cloudinary URL format")}catch(e){throw console.error("Failed to extract cloud name from Cloudinary URL:",e),Error("Invalid Cloudinary configuration")}},m=async(e,a)=>{if(!e)throw Error("No file provided for upload.");let t="cloudinary://474379412111872:vmLrf2n0HiVRg-YagsYWCSPtRqs@dcvqd1yg5",r="defaukt";if(!t||!r)throw Error("Cloudinary configuration is missing.");try{let l=d(t),s=new FormData;s.append("file",e),s.append("upload_preset",r);let i=(await c.Z.post("https://api.cloudinary.com/v1_1/".concat(l,"/image/upload"),s,{onUploadProgress:e=>{if(a&&e.total){let t=e.loaded/e.total*100;a(t)}}})).data;if(!i.secure_url||!i.public_id)throw Error("Incomplete Cloudinary response");return i}catch(e){throw console.error("Error uploading image to Cloudinary:",e),Error("Failed to upload image. Please try again.")}};var u=t(91326),g=t(83719),h=t(28027),p=t(33037),x=t(76520),b=t(55205),y=t(28549),f=t(407),j=t(19498),v=t(75511),w=t(52326),N=t(45814);let k={title:"",subtitle:"",price:"",features:[{label:"",icon:""},{label:"",icon:""},{label:"",icon:""},{label:"",icon:""},{label:"",icon:""},{label:"",icon:""}],seatsLeft:"",totalSeats:"",imageUrl:"",image:null,tags:[],packageType:""},P={"Umrah Reguler":["Umrah Ceria","Umrah Cermat","Umrah Istimewa"],"Umrah Edu Trip":["Manajemen","Daurah Pelajar"],"Umrah Corporate":["Bronze","Silver","Premium"],"Umrah Plus Mancanegara":["Turki","Mesir"],"Umrah Prestige":["Gold","Platinum"],"Umrah Mandiri":[],"Umrah Custom/Community":[]},Z=["home","user","settings","file","chart","message","camera","heart","star","check","x","alert"];var C=()=>{let[e,a]=(0,l.useState)([]),[t,s]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[C,S]=(0,l.useState)(!1),[U,E]=(0,l.useState)({...k}),[T,F]=(0,l.useState)([]),[L,A]=(0,l.useState)(""),[I,z]=(0,l.useState)(""),[_,D]=(0,l.useState)({promos:[],airports:[],packageTypes:Object.keys(P)}),[M,J]=(0,l.useState)(!0),O=async()=>{try{J(!0);let e=await (0,N.a$)();D({...e,packageTypes:Object.keys(P)}),J(!1)}catch(e){console.error("Failed to load filters:",e),J(!1)}},W=async()=>{S(!0);try{let e=await o.getPackages();a(e)}catch(e){alert("Failed to load packages.")}S(!1)};(0,l.useEffect)(()=>{W(),O()},[]);let q=e=>{let{name:a,value:t}=e.target;E({...U,[a]:t})},R=e=>{F(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},B=(e,a,t)=>{let r=[...U.features];r[e][a]=t,E({...U,features:r})},V=async e=>{e.preventDefault(),S(!0);let a=U.features.filter(e=>""!==e.label.trim()).map(e=>({label:e.label.trim(),icon:e.icon.trim()}));try{let e="";U.image&&(e=(await m(U.image)).secure_url);let t=[...T];L&&(t.push(L),I&&t.push(I));let r={title:U.title,subtitle:U.subtitle,price:parseFloat(U.price.replace(/[^0-9.-]+/g,"")),features:a,seatsLeft:parseInt(U.seatsLeft),totalSeats:parseInt(U.totalSeats),imageUrl:e,tags:t,packageType:L,subType:I};await o.addPackage(r),E({...k}),F([]),A(""),z(""),s(!1),W(),alert("Package added successfully!")}catch(e){alert("Failed to add package.")}S(!1)},H=async e=>{if(e.preventDefault(),S(!0),!(null==c?void 0:c.id)){S(!1);return}try{let e=c.imageUrl;U.image&&(e=(await m(U.image)).secure_url);let a=[...T];L&&(a.push(L),I&&a.push(I));let t=U.features.filter(e=>""!==e.label.trim()).map(e=>({label:e.label.trim(),icon:e.icon.trim()})),r={title:U.title,subtitle:U.subtitle,price:parseFloat(U.price.replace(/[^0-9.-]+/g,"")),features:t,seatsLeft:parseInt(U.seatsLeft),totalSeats:parseInt(U.totalSeats),imageUrl:e,tags:a,packageType:L,subType:I};await o.updatePackage(c.id,r),E({...k}),F([]),A(""),z(""),n(!1),d(null),s(!1),W(),alert("Package updated successfully!")}catch(e){alert("Failed to update package.")}S(!1)},$=async e=>{if(window.confirm("Are you sure you want to delete this package?")){S(!0);try{await o.deletePackage(e),W(),alert("Package deleted successfully!")}catch(e){alert("Failed to delete package.")}S(!1)}},K=e=>{var a;d(e),E({title:e.title,subtitle:e.subtitle,price:e.price.toString(),features:[...e.features,...Array(6-e.features.length).fill("")],seatsLeft:e.seatsLeft.toString(),totalSeats:e.totalSeats.toString(),imageUrl:e.imageUrl,image:null,tags:e.tags||[],packageType:e.packageType||""}),F((null===(a=e.tags)||void 0===a?void 0:a.filter(e=>!Object.keys(P).includes(e)&&!Object.values(P).flat().includes(e)))||[]),A(e.packageType||""),z(e.subType||""),n(!0),s(!0)},G=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),Y=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={"Umrah Reguler":"bg-blue-600","Umrah Edu Trip":"bg-purple-600","Umrah Corporate":"bg-orange-600","Umrah Plus Mancanegara":"bg-green-600","Umrah Prestige":"bg-yellow-600","Umrah Mandiri":"bg-gray-600","Umrah Custom/Community":"bg-rose-600",default:a?"bg-blue-600":"bg-gray-500"},l=Object.keys(P).includes(e)?t[e]:t.default;return(0,r.jsx)("span",{className:"".concat(l," text-white text-xs font-semibold px-2 py-1 rounded-full"),children:e})};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Travel Package Management"}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg transition-colors",onClick:()=>{n(!1),d(null),E({...k}),F([]),A(""),z(""),s(!t)},children:t?"Cancel":"Add New Package"}),(0,r.jsx)("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-6 rounded-lg transition-colors",onClick:()=>{W(),O()},children:"Refresh"})]}),t&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i?"Edit Package":"Add New Package"}),(0,r.jsxs)("form",{onSubmit:i?H:V,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Package Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"title",value:U.title,onChange:q,className:"w-full p-3 border border-gray-300 rounded-lg",placeholder:"e.g., Umroh Hemat Plus Thaif",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Package Subtitle ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"subtitle",value:U.subtitle,onChange:q,className:"w-full p-3 border border-gray-300 rounded-lg",placeholder:"e.g., Start jakarta 9 hari, By oman air",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Price (IDR) ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"price",value:U.price,onChange:q,className:"w-full p-3 border border-gray-300 rounded-lg",placeholder:"e.g., 31500000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-2",children:"Package Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&E({...U,image:e.target.files[0]})},className:"w-full p-2 border border-gray-300 rounded-lg"}),i&&(null==c?void 0:c.imageUrl)&&!U.image&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Current image will be kept if no new image is selected"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Available Seats ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"seatsLeft",value:U.seatsLeft,onChange:q,className:"w-full p-3 border border-gray-300 rounded-lg",placeholder:"e.g., 15",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Total Seats ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"totalSeats",value:U.totalSeats,onChange:q,className:"w-full p-3 border border-gray-300 rounded-lg",placeholder:"e.g., 40",required:!0})]})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Package Type ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{name:"packageType",value:L,onChange:e=>{let{name:a,value:t}=e.target;E({...U,[a]:t}),"packageType"===a&&(A(t),z(""))},className:"w-full p-3 border border-gray-300 rounded-lg",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Package Type"}),Object.keys(P).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),L&&P[L].length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-2",children:"Sub Type"}),(0,r.jsxs)("select",{value:I,onChange:e=>{z(e.target.value)},className:"w-full p-3 border border-gray-300 rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"Select Sub Type"}),P[L].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-2",children:"Additional Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:_.promos.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>R(e.name),className:"px-3 py-1 rounded-full text-sm font-medium ".concat(T.includes(e.name)?"bg-green-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:e.name},e.id))}),(0,r.jsx)("label",{className:"block text-gray-700 mb-2 mt-4",children:"Departure Airport"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:_.airports.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>R(e.code),className:"px-3 py-1 rounded-full text-sm font-medium ".concat(T.includes(e.code)?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:[e.code," - ",e.name]},e.id))})]}),(0,r.jsxs)(u.Z,{sx:{mt:4,mb:2},children:[(0,r.jsx)(g.Z,{variant:"h6",gutterBottom:!0,children:"Package Features (up to 6)"}),(0,r.jsx)(h.Z,{elevation:2,sx:{p:3,bgcolor:"background.paper"},children:(0,r.jsx)(p.ZP,{container:!0,spacing:3,children:U.features.map((e,a)=>(0,r.jsx)(p.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(x.Z,{variant:"outlined",sx:{height:"100%"},children:(0,r.jsx)(b.Z,{children:(0,r.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(y.Z,{fullWidth:!0,variant:"outlined",children:(0,r.jsx)(f.Z,{fullWidth:!0,label:"Feature ".concat(a+1),value:e.label,onChange:e=>B(a,"label",e.target.value),variant:"outlined",size:"small"})}),(0,r.jsx)(y.Z,{sx:{width:"40%"},variant:"outlined",children:(0,r.jsx)(j.Z,{freeSolo:!0,options:Z,value:e.icon,onInputChange:(e,t)=>{B(a,"icon",t)},renderInput:a=>(0,r.jsx)(f.Z,{...a,label:"Icon",variant:"outlined",size:"small",InputProps:{...a.InputProps,endAdornment:e.icon?(0,r.jsx)(w.Z,{position:"end",children:(0,r.jsx)(v.Z,{className:"tabler-".concat(e.icon),fontSize:"small"})}):null}})})})]})})})},a))})})]}),(0,r.jsx)("div",{className:"mt-8 flex justify-end",children:(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 rounded-lg text-white ".concat(i?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"," transition-colors"),disabled:C,children:C?"Processing...":i?"Update Package":"Add Package"})})]})]}),C&&!t&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-blue-600"}),(0,r.jsx)("p",{className:"mt-2",children:"Loading packages..."})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>{var a;return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden transition-transform duration-300 hover:scale-105",children:[(0,r.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[(0,r.jsx)("img",{className:"h-full w-full object-cover",src:e.imageUrl||"/api/placeholder/400/320",alt:"package"}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>K(e),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full",title:"Edit",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>e.id&&$(e.id),className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-full",title:"Delete",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.packageType&&Y(e.packageType,!0),e.subType&&Y(e.subType),null===(a=e.tags)||void 0===a?void 0:a.filter(a=>a!==e.packageType&&a!==e.subType).map(e=>(0,r.jsx)("span",{className:"bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full",children:e},e))]}),(0,r.jsx)("h3",{className:"text-xl font-bold text-center mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-500 text-center italic mb-4",children:e.subtitle}),(0,r.jsx)("p",{className:"text-2xl font-bold text-center text-rose-800 mb-6",children:G(e.price)}),(0,r.jsx)("div",{className:"border-t border-gray-200 my-4"}),(0,r.jsx)("div",{className:"space-y-3",children:e.features.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[""===e.icon?(0,r.jsx)("span",{className:"w-5 h-5 flex items-center justify-center rounded-full text-white ".concat(a<3?"bg-blue-500":a<6?"bg-green-500":"bg-yellow-500"),children:"âœ“"}):(0,r.jsx)("i",{className:"tabler-".concat(e.icon," text-blue-600 text-lg")}),(0,r.jsx)("span",{className:"text-gray-600",children:e.label})]},a))}),(0,r.jsx)("div",{className:"border-t border-gray-200 my-4"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("p",{className:"font-bold mb-2",children:[e.seatsLeft," seats left!"]}),(0,r.jsx)("div",{className:"h-2 bg-rose-100 rounded-full",children:(0,r.jsx)("div",{className:"h-full bg-rose-800 rounded-full",style:{width:"".concat(e.seatsLeft/e.totalSeats*100,"%")}})})]}),(0,r.jsxs)("button",{className:"w-full bg-rose-800 text-white py-2 px-4 rounded-lg hover:bg-rose-700 transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("i",{className:"tabler-user-search"}),"Detail Paket"]})]})]},e.id)})}),!C&&0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,r.jsx)("h3",{className:"mt-4 text-xl font-medium text-gray-900",children:"No packages found"}),(0,r.jsx)("p",{className:"mt-2 text-gray-500",children:"Get started by creating your first travel package."}),(0,r.jsx)("button",{className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg transition-colors",onClick:()=>s(!0),children:"Add Package"})]})]})}},1710:function(e,a,t){"use strict";var r=t(57437),l=t(2265),s=t(45814),i=t(62197),n=t(83719),o=t(28027),c=t(407),d=t(76548),m=t(32184),u=t(78498),g=t(60335),h=t(14595),p=t(25774),x=t(27270),b=t(11224),y=t(62373),f=t(94729),j=t(74732),v=t(8527),w=t(19847),N=t(84038);a.default=()=>{let[e,a]=(0,l.useState)({promos:[],airports:[]}),[t,k]=(0,l.useState)(""),[P,Z]=(0,l.useState)({code:"",name:""}),[C,S]=(0,l.useState)(null),[U,E]=(0,l.useState)(null),[T,F]=(0,l.useState)({open:!1,message:"",severity:"success"}),L=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";F({open:!0,message:e,severity:a})},A=()=>{F({...T,open:!1})};(0,l.useEffect)(()=>{I()},[]);let I=async()=>{try{let e=await (0,s.a$)();a(e)}catch(e){console.error("Failed to load filters:",e),alert("Failed to load filters. Please try again.")}},z=async()=>{if(!t.trim()){L("Promotion name cannot be empty","error");return}try{await (0,s.fu)(t),k(""),L("Promotion added successfully"),I()}catch(e){L("Failed to add promo. Please try again.","error")}},_=async e=>{try{await (0,s.qA)(e),I()}catch(e){L("Failed to delete promo. Please try again.","error")}},D=async()=>{if(!C||!C.name.trim()){L("Promotion name cannot be empty","error");return}try{await (0,s.e$)(C.id,C.name),S(null),L("Promotion Updated successfully"),I()}catch(e){L("Failed to update promo. Please try again.","error")}},M=async()=>{if(!P.code.trim()||!P.name.trim()){L("Airport code and name cannot be empty","error");return}try{await (0,s.Py)(P.code,P.name),Z({code:"",name:""}),L("Airport added successfully"),I()}catch(e){L("Failed to add airport. Please try again.","error")}},J=async e=>{try{await (0,s.Uu)(e),L("Airport deleted successfully"),I()}catch(e){L("Failed to delete airport. Please try again.","error")}},O=async()=>{if(!U||!U.code.trim()||!U.name.trim()){L("Airport code and name cannot be empty","error");return}try{await (0,s._w)(U.id,U.code,U.name),E(null),L("Airport updated successfully"),I()}catch(e){L("Failed to update airport. Please try again.","error")}};return(0,r.jsxs)(i.Z,{className:"py-8",maxWidth:"md",children:[(0,r.jsx)(n.Z,{variant:"h4",component:"h1",className:"mb-6 font-bold text-gray-800 flex items-center",children:"Filter Management"}),(0,r.jsxs)(o.Z,{elevation:2,className:"mb-8 p-6 bg-white",children:[(0,r.jsxs)(n.Z,{variant:"h5",component:"h2",className:"mb-4 font-semibold flex items-center",children:[(0,r.jsx)(b.Z,{className:"mr-2 text-blue-600"})," Promotions"]}),(0,r.jsxs)("div",{className:"flex mb-4 gap-2",children:[(0,r.jsx)(c.Z,{fullWidth:!0,variant:"outlined",size:"small",value:t,onChange:e=>k(e.target.value),placeholder:"New promotion name",className:"bg-white"}),(0,r.jsx)(d.Z,{variant:"contained",startIcon:(0,r.jsx)(y.Z,{}),onClick:z,className:"bg-blue-600 hover:bg-blue-700 whitespace-nowrap",children:"Add"})]}),(0,r.jsx)(m.Z,{className:"bg-gray-50 rounded",children:0===e.promos.length?(0,r.jsx)(u.ZP,{className:"p-4 text-gray-500 italic",children:"No promotions added yet"}):e.promos.map(e=>(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(u.ZP,{className:"p-4",children:(null==C?void 0:C.id)===e.id?(0,r.jsxs)("div",{className:"flex w-full gap-2 items-center",children:[(0,r.jsx)(c.Z,{fullWidth:!0,size:"small",value:C.name,onChange:e=>S({...C,name:e.target.value}),className:"bg-white"}),(0,r.jsx)(g.Z,{onClick:D,color:"success",size:"small",children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)(g.Z,{onClick:()=>S(null),color:"default",size:"small",children:(0,r.jsx)(j.Z,{})})]}):(0,r.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,r.jsx)(n.Z,{children:e.name}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.Z,{onClick:()=>S(e),color:"primary",size:"small",className:"mr-1",children:(0,r.jsx)(v.Z,{})}),(0,r.jsx)(g.Z,{onClick:()=>_(e.id),color:"error",size:"small",children:(0,r.jsx)(w.Z,{})})]})]})}),(0,r.jsx)(h.Z,{component:"li"})]},e.id))})]}),(0,r.jsxs)(o.Z,{elevation:2,className:"mb-8 p-6 bg-white",children:[(0,r.jsxs)(n.Z,{variant:"h5",component:"h2",className:"mb-4 font-semibold flex items-center",children:[(0,r.jsx)(N.Z,{className:"mr-2 text-blue-600"})," Airports"]}),(0,r.jsxs)("div",{className:"flex mb-4 gap-2",children:[(0,r.jsx)(c.Z,{variant:"outlined",size:"small",value:P.code,onChange:e=>Z({...P,code:e.target.value.toUpperCase()}),placeholder:"Code (e.g., CGK)",className:"w-32 bg-white",inputProps:{maxLength:3}}),(0,r.jsx)(c.Z,{fullWidth:!0,variant:"outlined",size:"small",value:P.name,onChange:e=>Z({...P,name:e.target.value}),placeholder:"Airport name (e.g., Jakarta)",className:"bg-white"}),(0,r.jsx)(d.Z,{variant:"contained",startIcon:(0,r.jsx)(y.Z,{}),onClick:M,className:"bg-blue-600 hover:bg-blue-700 whitespace-nowrap",children:"Add"})]}),(0,r.jsx)(m.Z,{className:"bg-gray-50 rounded",children:0===e.airports.length?(0,r.jsx)(u.ZP,{className:"p-4 text-gray-500 italic",children:"No airports added yet"}):e.airports.map(e=>(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(u.ZP,{className:"p-4",children:(null==U?void 0:U.id)===e.id?(0,r.jsxs)("div",{className:"flex w-full gap-2 items-center",children:[(0,r.jsx)(c.Z,{size:"small",value:U.code,onChange:e=>E({...U,code:e.target.value.toUpperCase()}),className:"w-24 bg-white",inputProps:{maxLength:3}}),(0,r.jsx)(c.Z,{fullWidth:!0,size:"small",value:U.name,onChange:e=>E({...U,name:e.target.value}),className:"bg-white"}),(0,r.jsx)(g.Z,{onClick:O,color:"success",size:"small",children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)(g.Z,{onClick:()=>E(null),color:"default",size:"small",children:(0,r.jsx)(j.Z,{})})]}):(0,r.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,r.jsxs)(n.Z,{children:[(0,r.jsx)("span",{className:"font-medium",children:e.code})," - ",e.name]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.Z,{onClick:()=>E(e),color:"primary",size:"small",className:"mr-1",children:(0,r.jsx)(v.Z,{})}),(0,r.jsx)(g.Z,{onClick:()=>J(e.id),color:"error",size:"small",children:(0,r.jsx)(w.Z,{})})]})]})}),(0,r.jsx)(h.Z,{component:"li"})]},e.id))})]}),(0,r.jsx)(p.Z,{open:T.open,autoHideDuration:3e3,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,r.jsx)(x.Z,{onClose:A,severity:T.severity,variant:"filled",children:T.message})})]})}}},function(e){e.O(0,[4358,808,5161,3834,2956,9325,6511,6492,1457,7683,5236,1998,1492,6510,2971,7023,1744],function(){return e(e.s=87101)}),_N_E=e.O()}]);